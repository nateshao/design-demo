---
create by 千羽  2021-10-09
---

[TOC]

<img src="https://gitee.com/nateshao/images/raw/master/img/20211009160736.png" style="zoom:80%;" />

## 1. 面向对象设计原则概述

- **可维护性(Maintainability)**：指软件能够被理解、改正、适应及扩展的难易程度。
- **可复用性(Reusability)**：指软件能够被重复使用的难易程度。
- 面向对象设计的目标之一在于**支持可维护性复用**，一方面需要实现设计方案或者源代码的复用，另一方面要确保系统能够易于扩展和修改，具有良好的可维护性

- 面向对象设计原则为**支持可维护性复用而诞生**
- **指导性原则，非强制性原则**
- 每一个设计模式都符合一个或多个面向对象设计原则，面向对象设计原则是**用于评价一个设计模式的使用效果的重要指标之一**

|                  **设计原则名称**                  |                             定义                             | 使用频率 |
| :------------------------------------------------: | :----------------------------------------------------------: | :------: |
| 单一职责原则(Single Responsibility Principle, SRP) | 一个对象应该只包含单一的职责，并且该职责被完整地封装在一个类中 |  ★★★★☆   |
|        开闭原则(Open-Closed Principle, OCP)        |              软件实体应当对扩展开放，对修改关闭              |  ★★★★★   |
|  里氏代换原则(Liskov Substitution Principle, LSP)  |        所有引用基类的地方必须能透明地使用其子类的对象        |  ★★★★★   |
|  依赖倒转原则(Dependence Inversion Principle, DIP  | 高层模块不应该依赖低层模块，它们都应该依赖抽象。抽象不应该依赖于细节，细节应该依赖于抽象 |  ★★★★★   |
| 接口隔离原则(Interface Segregation Principle, ISP) |              客户端不应该依赖那些它不需要的接口              |  ★★☆☆☆   |
|    合成复用原则(Composite Reuse Principle, CRP)    |         优先使用对象组合，而不是继承来达到复用的目的         |  ★★★★☆   |
|          迪米特法则(Law of Demeter, LoD)           | 每一个软件单位对其他的单位都只有最少的知识，而且局限于那些与本单位密切相关的软件单位 |  ★★★☆☆   |

## 2. 单一职责原则

> 单一职责原则定义：单一职责原则是最简单的面向对象设计原则，用于控制类的粒度大小

单一职责原则：一个对象应该只包含单一的职责，并且该职责被完整地封装在一个类中。

就一个类而言，应该仅有一个引起它变化的原因

- **单一职责原则分析** 
  - 一个类（大到模块，小到方法）承担的职责越多，它被复用的可能性就越小
  - 当一个职责变化时，可能会影响其他职责的运作
  - 将这些职责进行分离，将不同的职责封装在不同的类中
  - 将不同的变化原因封装在不同的类中
  - 单一职责原则是实现高内聚、低耦合的指导方针

- **单一职责原则实例** 

某软件公司开发人员针对CRM（Customer Relationship Management，客户关系管理）系统中的客户信息图表统计模块提出了如图所示的初始设计方案。

<img src="https://gitee.com/nateshao/images/raw/master/img/20211009162445.jpg" style="zoom:67%;" />

在图中，getConnection()方法用于连接数据库，findCustomers()用于查询所有的客户信息，createChart()用于创建图表，displayChart()用于显示图表。

现使用单一职责原则对其进行重构。

- **实例解析**

![](https://gitee.com/nateshao/images/raw/master/img/20211009163503.jpg)

## 3. 开闭原则

- **开闭原则定义** 

  > 开闭原则是面向对象的可复用设计的第一块基石，是最重要的面向对象设计原则。软件实体应当**对扩展开放，对修改关闭**。

- **开闭原则分析** 
  - 开闭原则由Bertrand Meyer于1988年提出
  - 在开闭原则的定义中，软件实体可以是一个软件模块、一个由多个类组成的局部结构或一个独立的类
  - 开闭原则是指软件实体应尽量在不修改原有代码的情况下进行扩展

## 4. 里氏代换原则定义

> 定义：所有引用**基类**的地方必须能透明地使用其**子类**的对象。

- 里氏代换原则分析

  里氏代换原则由2008年图灵奖得主、美国第一位计算机科学女博士、麻省理工学院教授BarbaraLiskov和卡内基.梅隆大学Jeannette Wing教授于1994年提出

在软件中将一个基类对象替换成它的子类对象，程序将不会产生任何错误和异常，反过来则不成立。如果一个软件实体使用的是一个子类对象的话，那么它不一定能够使用基类对象。

在程序中尽量使用基类类型来对对象进行定义，而在运行时再确定其子类类型。

## 5. 依赖倒转原则 

> 高层模块不应该依赖低层模块，它们都应该依赖抽象。抽象不应该依赖于细节，细节应该依赖于抽象。要针对接口编程，不要针对实现编程

依赖倒转原则是Robert C. Martin在1996年为“C++ Reporter”所写的专栏Engineering Notebook的第三篇，后来加入到他在2002年出版的经典著作《Agile Software Development, Principles, Patterns, and Practices》一书中

## 依赖倒转原则分析

- 在程序代码中传递参数时或在关联关系中，尽量引用层次高的抽象层类，即使用接口和抽象类进行变量类型声明、参数类型声明、方法返回类型声明，以及数据类型的转换等

- 在程序中尽量使用抽象层进行编程，而将具体类写在配置文件中

<img src="https://gitee.com/nateshao/images/raw/master/img/20211009172253.jpg" style="zoom:80%;" />
